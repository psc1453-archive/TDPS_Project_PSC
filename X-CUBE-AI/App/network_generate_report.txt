Neural Network Tools for STM32AI v1.4.1 (STM.ai v6.0.0-RC6)
Created date       : 2021-06-13 01:45:22
Parameters         : generate --name network -m /Users/psc/Template/final_sim.onnx --type onnx --compression 1 --verbosity 1 --workspace /var/folders/qd/tb6sbtld2mb2n5ywrnrm9rp80000gn/T/mxAI_workspace759013583428521613195022472011620 --output /Users/psc/.stm32cubemx

Exec/report summary (generate)
------------------------------------------------------------------------------------------------------------------------
model file         : /Users/psc/Template/final_sim.onnx
type               : onnx
c_name             : network
compression        : None
quantize           : None
workspace dir      : /private/var/folders/qd/tb6sbtld2mb2n5ywrnrm9rp80000gn/T/mxAI_workspace759013583428521613195022472011620
output dir         : /Users/psc/.stm32cubemx

model_name         : final_sim
model_hash         : b4a0cdf80f7df895c1418d66e968a7fd
input              : input_image [3888 items, 15.19 KiB, ai_float, FLOAT32, (54, 72, 1)]
inputs (total)     : 15.19 KiB
output             : predicted_value [7 items, 28 B, ai_float, FLOAT32, (1, 1, 7)]
outputs (total)    : 28 B
params #           : 309,291 items (1.18 MiB)
macc               : 1,195,216
weights (ro)       : 1,237,164 B (1.18 MiB) 
activations (rw)   : 60,976 B (59.55 KiB) 
ram (total)        : 76,556 B (74.76 KiB) = 60,976 + 15,552 + 28

Model name - final_sim ['input_image'] ['predicted_value']
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
id   layer (type)              shape               param/size          macc      connected to   |   c_size                c_macc             c_type               
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
0    input_image (Input)       (h:54, w:72, c:1)                                                |                                           
     node_48 (Conv2D)          (h:52, w:70, c:4)   40/160              131,044   input_image    |                         +14,560(+11.1%)    conv2d()[0]          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
1    node_28 (Nonlinearity)    (h:52, w:70, c:4)                       14,560    node_48        |                         -14,560(-100.0%)  
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
2    node_51 (Conv2D)          (h:50, w:68, c:4)   148/592             489,604   node_28        |                         +27,200(+5.6%)     optimized_conv2d()[1]
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
3    node_31 (Nonlinearity)    (h:50, w:68, c:4)                       13,600    node_51        |                         -13,600(-100.0%)  
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
4    node_32 (Pool)            (h:25, w:34, c:4)                       13,600    node_31        |                         -13,600(-100.0%)  
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
5    node_54 (Conv2D)          (h:23, w:32, c:8)   296/1,184           211,976   node_32        |                         +12,032(+5.7%)     optimized_conv2d()[2]
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
6    node_35 (Nonlinearity)    (h:23, w:32, c:8)                       5,888     node_54        |                         -5,888(-100.0%)   
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
7    node_36 (Pool)            (h:12, w:16, c:8)                       6,144     node_35        |                         -6,144(-100.0%)   
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
8    node_44 (Reshape)         (c:1536)                                          node_36        |                                           
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
9    fc0weight (Placeholder)   (h:1536, c:200)     307,200/1,228,800                            |   -1,228,800(-100.0%)                     
     fc0bias (Placeholder)     (c:200)             200/800                                      |   -800(-100.0%)                           
     node_45 (Gemm)            (c:200)                                 307,200   node_44        |   +1,229,600(+100.0%)                      gemm()[3]            
                                                                                 fc0weight      |  
                                                                                 fc0bias        |  
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
10   node_46 (Nonlinearity)    (c:200)                                 200       node_45        |                                            nl()[4]              
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
11   fc3weight (Placeholder)   (h:200, c:7)        1,400/5,600                                  |   -5,600(-100.0%)                         
     fc3bias (Placeholder)     (c:7)               7/28                                         |   -28(-100.0%)                            
     predicted_value (Gemm)    (c:7)                                   1,400     node_46        |   +5,628(+100.0%)                          gemm()/o[5]          
                                                                                 fc3weight      |  
                                                                                 fc3bias        |  
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
model/c-model: macc=1,195,216/1,195,216  weights=1,237,164/1,237,164  activations=--/60,976 io=--/15,580


Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name         : final_sim
c-name             : network
c-node #           : 6
c-array #          : 19
activations size   : 60976
weights size       : 1237164
macc               : 1195216
inputs             : ['input_image_output_array']
outputs            : ['predicted_value_output_array']


C-Arrays (19)
------------------------------------------------------------------------------------------------------------------------
c_id  name (*_array)          item/size           mem-pool     c-type       fmt    comment            
------------------------------------------------------------------------------------------------------------------------
0     input_image_output      3888/15552          user         float        float  /input             
1     node_48_output          14560/58240         activations  float        float                     
2     node_51_output          3400/13600          activations  float        float                     
3     node_54_output          1536/6144           activations  float        float                     
4     node_45_output          200/800             activations  float        float                     
5     node_46_output          200/800             activations  float        float                     
6     predicted_value_output  7/28                user         float        float  /output            
7     fc3bias                 7/28                weights      const float  float                     
8     fc3weight               1400/5600           weights      const float  float                     
9     fc0bias                 200/800             weights      const float  float                     
10    fc0weight               307200/1228800      weights      const float  float                     
11    node_48_weights         36/144              weights      const float  float                     
12    node_48_bias            4/16                weights      const float  float                     
13    node_51_weights         144/576             weights      const float  float                     
14    node_51_bias            4/16                weights      const float  float                     
15    node_54_weights         288/1152            weights      const float  float                     
16    node_54_bias            8/32                weights      const float  float                     
17    node_51_scratch0        544/2176            activations  float        float                     
18    node_54_scratch0        512/2048            activations  float        float                     
------------------------------------------------------------------------------------------------------------------------


C-Layers (6)
------------------------------------------------------------------------------------------------------------------------
c_id  name (*_layer)   id  layer_type        macc        rom         tensors                    shape (array id)                       
------------------------------------------------------------------------------------------------------------------------
0     node_48          1   conv2d            145604      160         I: input_image_output      [1, 54, 72, 1] (0)                     
                                                                     W: node_48_weights                                                
                                                                     W: node_48_bias                                                   
                                                                     O: node_48_output          [1, 52, 70, 4] (1)                     
------------------------------------------------------------------------------------------------------------------------
1     node_51          4   optimized_conv2d  516804      592         I: node_48_output          [1, 52, 70, 4] (1)                     
                                                                     S: node_51_scratch0                                               
                                                                     W: node_51_weights                                                
                                                                     W: node_51_bias                                                   
                                                                     O: node_51_output          [1, 25, 34, 4] (2)                     
------------------------------------------------------------------------------------------------------------------------
2     node_54          7   optimized_conv2d  224008      1184        I: node_51_output          [1, 25, 34, 4] (2)                     
                                                                     S: node_54_scratch0                                               
                                                                     W: node_54_weights                                                
                                                                     W: node_54_bias                                                   
                                                                     O: node_54_output          [1, 12, 16, 8] (3)                     
------------------------------------------------------------------------------------------------------------------------
3     node_45          9   gemm              307200      1229600     I: node_54_output0         [1, 1, 1, 1536] (3)                    
                                                                     I: fc0weight               [1, 1536, 1, 200] (10)                 
                                                                     I: fc0bias                 [1, 1, 1, 200] (9)                     
                                                                     O: node_45_output          [1, 1, 1, 200] (4)                     
------------------------------------------------------------------------------------------------------------------------
4     node_46          10  nl                200         0           I: node_45_output          [1, 1, 1, 200] (4)                     
                                                                     O: node_46_output          [1, 1, 1, 200] (5)                     
------------------------------------------------------------------------------------------------------------------------
5     predicted_value  11  gemm              1400        5628        I: node_46_output          [1, 1, 1, 200] (5)                     
                                                                     I: fc3weight               [1, 200, 1, 7] (8)                     
                                                                     I: fc3bias                 [1, 1, 1, 7] (7)                       
                                                                     O: predicted_value_output  [1, 1, 1, 7] (6)                       
------------------------------------------------------------------------------------------------------------------------



Complexity report per layer - macc=1,195,216 weights=1,237,164 act=60,976 ram_io=15,580
--------------------------------------------------------------------------------
id   name              c_macc                    c_rom                     c_id
--------------------------------------------------------------------------------
0    node_48           |||||             12.2%   |                  0.0%   [0] 
2    node_51           ||||||||||||||||  43.2%   |                  0.0%   [1] 
5    node_54           |||||||           18.7%   |                  0.1%   [2] 
9    node_45           |||||||||         25.7%   ||||||||||||||||  99.4%   [3] 
10   node_46           |                  0.0%   |                  0.0%   [4] 
11   predicted_value   |                  0.1%   |                  0.5%   [5] 

Generated files (5)
------------------------------------------------------------------------------------------------------------------------
/Users/psc/.stm32cubemx/network_config.h
/Users/psc/.stm32cubemx/network.h
/Users/psc/.stm32cubemx/network.c
/Users/psc/.stm32cubemx/network_data.h
/Users/psc/.stm32cubemx/network_data.c
